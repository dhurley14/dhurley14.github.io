
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Introduction to the Leontief IO Model - Most Significant Byte</title>
  <meta name="author" content="Devin Hurley">

  
  <meta name="description" content="Background Motivation
Oil prices have been falling dramatically. Oil prices are now at 40% of what they started FY 2014 off.
The fall in oil prices &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dhurley14.github.io/blog/2015/02/08/leontif-input-output-model">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Most Significant Byte" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36716298-2']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_setDomainName','github.io']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Most Significant Byte</a></h1>
  
    <h2>For Turning Thoughts to Bits.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="dhurley14.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about/">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Introduction to the Leontief IO Model</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-08T22:03:52-05:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:03 pm</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://dhurley14.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h2 id="background-motivation">Background Motivation</h2>
<p>Oil prices have been falling dramatically.  Oil prices are now at 40% of what they started FY 2014 off.
The fall in oil prices has been a result of increasing shale oil production in the United States and 
softening global demand.  Falling oil prices are part of a global phenomenon of deflation.<br />
The United States is far off the Federal Reserve’s goal of 2% inflation (currently up 0.7% in December 2014 from a year earlier).
Being able to predict demand is imperative to all sectors of an economy.  In this post I will introduce the
Leontief IO model and examine just how accurate it can be at predicting demand using historical data from the <a href="http://bea.gov/industry/io_annual.htm">BEA</a></p>

<p>This post will contain an introduction to the components of the model.  I will present a basic example using fictional data.
I will then present a model utilizing real world data.  In a future post I will build a new model that can be used to predict values of 
sector production <script type="math/tex">\hat{x}</script> using statistics and the Fourier transform.</p>

<!--more-->

<h2 id="enter-the-leontief-input---output-model">Enter the Leontief Input - Output Model</h2>
<p><a href="https://en.wikipedia.org/wiki/Input%E2%80%93output_model#Basic_derivation">The Leontief Input - Output model</a> 
amounts to breaking down an economy into it’s constituent parts so that firms can project demand for their specific sector of the economy.<br />
Say an economy produces goods and services, and those goods and services also consume other goods and 
services (we’ll call this the intermediate demand).  The rest of the goods and services produced go to 
consumers (we’ll call this the final demand).  We can represent this relationship with an equation.  The following model 
is a simplified version of more accurate models used globally. </p>

<script type="math/tex; mode=display">
\hat{x} = C\hat{x} + \hat{d}
</script>

<p>where <script type="math/tex">\hat{x}</script> is a vector containing the total amount of units produced, per sector; <script type="math/tex">C\hat{x}</script> is the intermediate demand (i.e. the demand
the Services industry has for all units produced by all industry’s) and <script type="math/tex">\hat{d}</script> is the final demand (i.e. the consumer). 
Assume there are three parts to a country, say, MadeUpLand’s economy.  In MadeUpLand there is Services, Manufacturing and Agriculture.
Our rates for units consumed per unit of output per industry can be represented by the table below..</p>

<table>
  <tr>
    <td>Purchased From | </td><td>Manufacturing | </td><td>Agriculture | </td><td>Services</td>
  </tr>
  <tr>
    <td>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212; | </td><td>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211; | </td><td>&#8212;&#8212;&#8212;&#8212;&#8212;&#8211; | </td><td>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;</td>
  </tr>
  <tr>
    <td>Manufacturing</td><td>.45</td><td>.35</td><td>.15</td>
  </tr>
  <tr>
    <td>Agriculture</td><td>.15</td><td>.25</td><td>.05</td>
  </tr>
  <tr>
    <td>Services</td><td>.05</td><td>.05</td><td>.25</td>
  </tr>
</table>

<p>We can remove the headings of this table which will yield us our matrix <script type="math/tex">C</script>..</p>

<script type="math/tex; mode=display">% <![CDATA[

C = \begin{bmatrix}0.45&0.35&0.15\\0.15&0.25&0.05\\0.05&0.05&0.25\end{bmatrix}
 %]]></script>

<p>Assuming our economists are able to accurately predict the number of units we can expect our consumers <script type="math/tex">d</script> to consume, say..</p>

<script type="math/tex; mode=display">
\hat{d} = \begin{bmatrix}7\\18\\26\end{bmatrix}
</script>

<p>We could then attempt to estimate the number of units our economy must produce, <script type="math/tex">\hat{x}</script>, in each sector to satisfy the demand from
our consumers <script type="math/tex">\hat{d}</script> and the demand of other industries in our economy <script type="math/tex">C</script>.  The following transforms our equation to satisfy this constraint.</p>

<script type="math/tex; mode=display">

(I - C)\cdot\hat{x} = \hat{d}
</script>

<script type="math/tex; mode=display">

\vdots

</script>

<script type="math/tex; mode=display">


\hat{x} = (I - C)^{-1} \cdot \hat{d}

</script>

<p>Substituting our variables with the actual values yields the following result..</p>

<script type="math/tex; mode=display">% <![CDATA[


\hat{x} = \left(\begin{bmatrix}1&0&0\\0&1&0\\0&0&1\end{bmatrix} - \begin{bmatrix}0.45&0.35&0.15\\0.15&0.25&0.05\\0.05&0.05&0.25\end{bmatrix}\right)^{-1} . \begin{bmatrix}7\\18\\26\end{bmatrix}

 %]]></script>

<script type="math/tex; mode=display">

\vdots

</script>

<script type="math/tex; mode=display">

\hat{x} = \begin{bmatrix}46.59\\35.9962\\40.1724\end{bmatrix}

</script>

<h2 id="how-good-is-this-model---working-with-bea-data">How good is this model? - Working with BEA data</h2>

<p>So doing all the matrix operations on the Leontief model is pretty basic stuff.  How do we make this interesting?  Let’s use real data
from the BEA and test that the above mathematical steps are correct.</p>

<p>I grabbed data from the <a href="http://bea.gov/industry/io_annual.htm">BEA input output accounts data</a>.  After about a half hour of examining the data,
I was able to figure out what parts I needed to computer the appropriate values to be used in the model.  First I will go over our data set.</p>

<p>The data set contains total industry output vectors (<script type="math/tex">\hat{x}</script>).  I will reiterate now, the point of this post is to introduce a real world
data set and attempt to prove that the Leontief model is correct, and that the mathematical steps above are reproducible on real world data.
This won’t be a mathematical proof. Considering we are given <script type="math/tex">\hat{x}</script>, we must compute values for <script type="math/tex">\hat{d}</script> and <script type="math/tex">C</script>.  </p>

<p>To compute values for <script type="math/tex">C</script> (this algorithm will be imperative in the next post when we build our extrapolative model) I introduce
a new matrix <script type="math/tex">U</script>.  <script type="math/tex">U</script> contains the units consumed by the sectors of the economy.  <script type="math/tex">C_{i,j}</script> will be computed as </p>

<script type="math/tex; mode=display">
\frac{U_{i,j}}{\hat{x}_{j}}
</script>

<p><script type="math/tex">\hat{d}</script> will be defined as the difference between the total units the economy produced per sector, <script type="math/tex">\hat{x}</script>, and the amount each sector consumed, <script type="math/tex">C \cdot \hat{x}</script>.</p>

<p>The data set contains total industry output vectors by sector for each year from 1997 - 2013.  For this example I will use only the 2013 data to
build a kind of proof of concept that the Leontief model is correct.  The industry output vector will be represented as <script type="math/tex">\hat{x}</script>.<br />
I will introduce a new matrix <script type="math/tex">U</script> which will contain the units consumed by industry (the input to each sector).  I will then utilize
<script type="math/tex">U</script> to compute the consumption rates for which <script type="math/tex">C</script> will contain.</p>

<p>I acquired the data for <script type="math/tex">\hat{x}</script> by just copying the column Total Industry Output from the “Make” excel file into a Python list.
To build <script type="math/tex">U</script> I parsed the file <a href="https://github.com/dhurley14/LeontiefIOModel/blob/master/src/betterData.csv">fixedData.csv</a> which 
is a modified version of the data from the BEA <a href="http://bea.gov/industry/xls/io-annual/IOUse_Before_Redefinitions_PRO_1997-2013_Sector.xlsx">“Use”</a> excel file.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
</pre></td><td class="code"><pre><code class="Python"><span class="line"><span class="kn">import</span> <span class="nn">csv</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">os</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">sys</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">linalg</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">math</span>
</span><span class="line">
</span><span class="line"><span class="sd">&quot;&quot;&quot; Create a script that will wrangle and format our IO data</span>
</span><span class="line"><span class="sd">    and then put it into a scipy matrix, which we can then save</span>
</span><span class="line"><span class="sd">    and use later.</span>
</span><span class="line">
</span><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">save_table</span><span class="p">(</span><span class="n">someFile</span><span class="p">,</span> <span class="n">theDelimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">,</span><span class="n">startPoint</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">endPoint</span><span class="o">=</span><span class="mi">17</span><span class="p">):</span>
</span><span class="line">    <span class="sd">&quot;&quot;&quot; loads data from csv file</span>
</span><span class="line"><span class="sd">    into a numpy matrix and saves</span>
</span><span class="line"><span class="sd">    the matrix data</span>
</span><span class="line">
</span><span class="line"><span class="sd">    someFile csv: a csv file containing our matrix data.</span>
</span><span class="line"><span class="sd">    theDelimiter char: character to split columns of data, set to &#39;,&#39;.</span>
</span><span class="line"><span class="sd">    </span>
</span><span class="line"><span class="sd">    &quot;&quot;&quot;</span>
</span><span class="line">    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">481026</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">580284</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">496708</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">1206919</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">5787100</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">1458137</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">1392835</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">1024517</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">1223897</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">5133698</span><span class="p">,</span>
</span><span class="line">        <span class="mf">1.0</span><span class="o">/</span><span class="mi">3691586</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">2564883</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">1218544</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">740624</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">2706124</span><span class="p">]</span>
</span><span class="line">    <span class="n">afile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">someFile</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="n">data</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">afile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">theDelimiter</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;betterData.csv&#39;</span><span class="p">,</span><span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
</span><span class="line">        <span class="n">target</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="n">row</span><span class="p">[</span><span class="n">startPoint</span><span class="p">:</span><span class="n">endPoint</span><span class="p">]</span>
</span><span class="line">            <span class="n">target</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">startPoint</span><span class="p">:</span><span class="n">endPoint</span><span class="p">])</span>
</span><span class="line">
</span><span class="line">    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="s">&#39;betterData.csv&#39;</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="n">theDelimiter</span><span class="p">,</span><span class="n">skip_header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class="line">    <span class="c">#for row in data:</span>
</span><span class="line">    <span class="c">#    print row[2:]</span>
</span><span class="line">    <span class="n">U</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
</span><span class="line">    <span class="k">print</span> <span class="n">U</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>outputs this..</p>

<p><code>[array([ 94325,    160,      0,   1939, 275162,   1584,   3193,     92,
            1,     49,   2030,   1094,   7517,     81,   2663]), 
            array([  2473,  54705,  33987,  10292, 568596,     50,     57,   2015,
          301,   4060,   1341,    457,   1163,    454,  18612]), 
          array([ 4168,  3563,  2191,  2192, 55702,  4641, 10797,  5912,  4326,
       68779,  9216, 25255, 10772,  3593, 29092]), ...</code></p>

<p>Now that we have our U, we can compute C and d.  Notice I set the variable <code>x</code> above to be 1.0/val instead of the actual
output values because in Python multiplication is 25% faster than <a href="http://stackoverflow.com/a/226563">division</a>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="Python"><span class="line"><span class="n">new</span><span class="o">-</span><span class="n">host</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">~</span> <span class="n">devin</span><span class="err">$</span> <span class="n">time</span> <span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s">&#39;for i in xrange(int(1e8)): t=12341234234.234 / 2.0&#39;</span>
</span><span class="line">
</span><span class="line"><span class="n">real</span>	<span class="mi">0</span><span class="n">m12</span><span class="o">.</span><span class="mi">162</span><span class="n">s</span>
</span><span class="line"><span class="n">user</span>	<span class="mi">0</span><span class="n">m12</span><span class="o">.</span><span class="mi">131</span><span class="n">s</span>
</span><span class="line"><span class="n">sys</span>	<span class="mi">0</span><span class="n">m0</span><span class="o">.</span><span class="mo">01</span><span class="mi">8</span><span class="n">s</span>
</span><span class="line"><span class="n">new</span><span class="o">-</span><span class="n">host</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">~</span> <span class="n">devin</span><span class="err">$</span> <span class="n">time</span> <span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s">&#39;for i in xrange(int(1e8)): t=12341234234.234 * 0.5&#39;</span>
</span><span class="line">
</span><span class="line"><span class="n">real</span>	<span class="mi">0</span><span class="n">m9</span><span class="o">.</span><span class="mi">270</span><span class="n">s</span>
</span><span class="line"><span class="n">user</span>	<span class="mi">0</span><span class="n">m9</span><span class="o">.</span><span class="mi">244</span><span class="n">s</span>
</span><span class="line"><span class="n">sys</span>	<span class="mi">0</span><span class="n">m0</span><span class="o">.</span><span class="mo">015</span><span class="n">s</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Here is the python code that computes <script type="math/tex">C</script>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
</pre></td><td class="code"><pre><code class="Python"><span class="line"><span class="c"># table2 will contain the rates</span>
</span><span class="line">    <span class="c"># at which each sector consumes.</span>
</span><span class="line">    <span class="n">table2</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">U</span><span class="p">:</span>
</span><span class="line">        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">        <span class="n">row2</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
</span><span class="line">            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class="line">            <span class="n">row2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">)))</span>
</span><span class="line">            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">            <span class="c">#print row2</span>
</span><span class="line">        <span class="k">print</span> <span class="n">row2</span>
</span><span class="line">        <span class="n">table2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row2</span><span class="p">)</span>
</span><span class="line">    <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">table2 after loop&quot;</span>
</span><span class="line">    <span class="k">print</span> <span class="n">table2</span>
</span><span class="line">
</span><span class="line">    <span class="c"># transform table2 into a useable format</span>
</span><span class="line">    <span class="c"># this will be C</span>
</span><span class="line">    <span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
</span><span class="line">    <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</span><span class="line">    <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;myMatrix&#39;</span><span class="p">,</span><span class="n">C</span><span class="p">)</span>
</span><span class="line">    <span class="k">print</span> <span class="n">C</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Next we will compute <script type="math/tex">\hat{d}</script></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="Python"><span class="line"><span class="k">print</span> <span class="s">&quot;printing vec now..&quot;</span>
</span><span class="line">
</span><span class="line">    <span class="c"># put x back into it&#39;s original form, not 1.0/val</span>
</span><span class="line">    <span class="n">vecx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">([[</span><span class="mf">1.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">)]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
</span><span class="line">    <span class="k">print</span> <span class="n">vecx</span>
</span><span class="line">    <span class="n">B</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">vecx</span><span class="p">)</span>
</span><span class="line">    <span class="c">#B = np.load(&#39;myMatrix.npy&#39;)</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">B:&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="k">print</span> <span class="n">B</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s"> our vector d&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="n">vecd</span> <span class="o">=</span> <span class="n">vecx</span> <span class="o">-</span> <span class="n">B</span>
</span><span class="line">    <span class="k">print</span> <span class="n">vecd</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And finally our equation <script type="math/tex">\hat{x} = (I - C)^{-1} \cdot \hat{d}</script></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="Python"><span class="line"><span class="k">print</span> <span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Now we will compute our function to find vecx&quot;</span><span class="p">)</span>
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="s">&quot;computing x=(I-C)^-1 . d&quot;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c"># create identity matrix by computing A dot inverse(A)</span>
</span><span class="line"><span class="n">I</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">prod</span> <span class="o">=</span> <span class="p">(</span><span class="n">I</span> <span class="o">-</span> <span class="n">A</span><span class="p">)</span>
</span><span class="line"><span class="n">result</span> <span class="o">=</span> <span class="n">prod</span><span class="o">.</span><span class="n">I</span>
</span><span class="line"><span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">vecd</span><span class="p">)</span>
</span><span class="line"><span class="k">print</span> <span class="s">&quot;The above should be equal to vecx&quot;</span>
</span><span class="line"><span class="k">print</span> <span class="n">vecx</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The resulting <script type="math/tex">\hat{x}</script> = <code>[[  481026.00000002]
 [  580284.00000003]
 [  496708.00000001]
 [ 1206919.00000001]
 [ 5787100.00000011]
 [ 1458137.00000003]
 [ 1392835.00000001]
 [ 1024517.00000002]
 [ 1223897.00000001]
 [ 5133698.00000016]
 [ 3691586.0000002 ]
 [ 2564883.        ]
 [ 1218544.00000002]
 [  740624.00000001]
 [ 2706124.00000001]]</code></p>

<p>which, disregarding rounding numerical approximation errors, is exactly our precomputed total industrial output vector
 <code>[[  481026.]
 [  580284.]
 [  496708.]
 [ 1206919.]
 [ 5787100.]
 [ 1458137.]
 [ 1392835.]
 [ 1024517.]
 [ 1223897.]
 [ 5133698.]
 [ 3691586.]
 [ 2564883.]
 [ 1218544.]
 [  740624.]
 [ 2706124.]]</code></p>

<p>Next time we will use this algorithm of computing <script type="math/tex">C</script> and <script type="math/tex">\hat{d}</script> over all of our historical data,
 perform some statistical analysis on this and then try to extrapolate values for <script type="math/tex">\hat{x}</script>.  Source code is available on
 my <a href="https://github.com/dhurley14/LeontiefIOModel">GitHub</a>.  Until next time!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Devin Hurley</span></span>

      




<time class='entry-date' datetime='2015-02-08T22:03:52-05:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:03 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linear-algebra/'>linear algebra</a>, <a class='category' href='/blog/categories/numpy/'>numpy</a>, <a class='category' href='/blog/categories/scipy/'>scipy</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://dhurley14.github.io/blog/2015/02/08/leontif-input-output-model/" data-via="" data-counturl="http://dhurley14.github.io/blog/2015/02/08/leontif-input-output-model/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/01/11/marc-andreessen-lda/" title="Previous Post: Topic Analysis and Marc Andreessen's tweets">&laquo; Topic Analysis and Marc Andreessen&#8217;s tweets</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/02/09/extracting-iphone-sms-backups/" title="Next Post: Extracting iPhone SMS Backups">Extracting iPhone SMS Backups &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/10/29/gcp-export-kubernetes-deployment/">GCP Export Kubernetes Deployment</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/21/how-to-equity/">How to Equity</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/11/michael-nielsen-how-bitcoin-works/">Michael Nielsen How Bitcoin Works</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/19/what-i-learned-at-pomco-today-5/">What I Learned at POMCO Today 5</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/18/til-4/">What I Learned at POMCO Today - 4</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/dhurley14">@dhurley14</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dhurley14',
            count: 2,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Devin Hurley -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dhurley14githubio';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://dhurley14.github.io/blog/2015/02/08/leontif-input-output-model/';
        var disqus_url = 'http://dhurley14.github.io/blog/2015/02/08/leontif-input-output-model/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







  <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
</body>
</html>
